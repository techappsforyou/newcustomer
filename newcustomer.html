<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Online Advertising</title>
<style>
  :root{
    --bg:#f6f7fb;
    --card:#ffffff;
    --ink:#0f172a;
    --muted:#5f6b85;
    --brand:#7c3aed;
    --brand-2:#ec4899;
    --accent:#00c389;

    --shadow:0 10px 28px rgba(18,24,40,.14);
    --radius:18px;

    --fly-ms:650ms;
    --view-ms:380ms;
    --sheet-ms:380ms;
    --truck-ms:1750ms;
  }

  *{box-sizing:border-box}
  body{margin:0;font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg);display:flex;justify-content:center}
  .app{width:100%;max-width:480px;min-height:100dvh;display:flex;flex-direction:column;background:#eef1f6;position:relative;overflow:hidden}

  /* HEADER */
  .topbar{
    position:sticky; top:0; z-index:10;
    background:linear-gradient(135deg,var(--brand) 0%, #9b5cf3 50%, var(--brand-2) 105%);
    color:#fff; display:flex; align-items:center; justify-content:space-between;
    padding:14px 16px; box-shadow:0 2px 20px rgba(124,58,237,.35);
  }
  .brand{display:flex;align-items:center;gap:10px;font-weight:900}
  .brand .dot{width:22px;height:22px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #fff 0 30%, rgba(255,255,255,.45) 32%, transparent 33%),linear-gradient(135deg,#fff2,#fff0);border:2px solid rgba(255,255,255,.55);box-shadow:0 0 0 3px rgba(255,255,255,.12) inset}
  .icon-btn{border:0;background:transparent;font-size:22px;line-height:1;cursor:pointer;color:#fff}
  .cart{position:relative;font-size:22px;color:#fff}
  .cart-badge{position:absolute;top:-6px;right:-8px;background:#111;color:#fff;font-size:11px;min-width:18px;text-align:center;padding:2px 6px;border-radius:999px;border:2px solid rgba(255,255,255,.95)}

  /* VIEWS */
  .views{position:relative;flex:1;overflow:hidden}
  .view{position:absolute;inset:0;padding:14px;padding-bottom:112px;transform:translateX(100%);transition:transform var(--view-ms) cubic-bezier(.2,.8,.2,1)}
  .view.active{transform:translateX(0)}
  .view.prev{transform:translateX(-100%)}
  h2{margin:14px 2px 10px;font-size:14px;font-weight:800;text-transform:uppercase;color:var(--muted);letter-spacing:.08em}

  .list{display:grid;gap:12px}
  .card{
    display:flex; align-items:center; gap:16px;
    background:var(--card); border-radius:20px;
    padding:16px 16px;                /* –±—ã–ª–æ 18px */
    min-height:162px;                 /* –±—ã–ª–æ 176px ‚Äî –Ω–∏–∂–µ */
    box-shadow:var(--shadow); border:2px solid transparent; cursor:pointer;
    transition:border-color .2s ease, transform .08s ease, background .2s ease;
  }
  .card:active{transform:scale(.99)}
  .card.selected{border-color:var(--accent);background:#f5fff9}

  .thumb{flex:0 0 auto;width:116px;height:116px;border-radius:16px;overflow:hidden;display:flex;align-items:center;justify-content:center} /* –±—ã–ª–æ 124px */
  .thumb img{width:100%;height:100%;object-fit:contain;padding:4px}

  .meta{display:flex;flex-direction:column}
  .view[data-step="packages"] .meta .big{font-size:25px;font-weight:900}  /* —á—É—Ç—å –º–µ–Ω—å—à–µ, —á—Ç–æ–±—ã –≤–ª–µ–∑–∞–ª–æ */
  .view[data-step="packages"] .meta .sub{font-size:15px;color:var(--muted)}
  .meta .big{font-size:18px;font-weight:800}
  .meta .sub{font-size:13px;color:var(--muted);margin-top:2px}

  /* PRODUCTS */
  .view[data-step="products"] .list{grid-template-columns:1fr 1fr;gap:14px}
  .view[data-step="products"] .card{flex-direction:column;justify-content:center;align-items:center;min-height:168px}
  .view[data-step="products"] .thumb{width:96px;height:96px}
  .view[data-step="products"] .thumb img{padding:6px}
  .view[data-step="products"] .meta .big{font-size:17px}
  .view[data-step="products"] .meta .sub{font-size:12px}

  /* CONTINUE */
  .continue{position:fixed;left:0;right:0;bottom:10px;z-index:20;display:flex;justify-content:center}
  .continue button{width:min(440px,92vw);padding:16px 18px;border-radius:999px;border:0;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;font-weight:900;letter-spacing:.04em;box-shadow:0 12px 24px rgba(124,58,237,.25)}
  .continue button:disabled{opacity:.45;filter:grayscale(.2);box-shadow:none}

  /* CART SHEET ‚Äì backdrop instant, panel animates */
  .sheet{
    position:fixed; inset:0; z-index:30; display:grid; align-items:end;
    /* backdrop appears instantly (no transition) */
    background:transparent;
    pointer-events:none;               /* –Ω–µ –∫–ª–∏–∫–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –∑–∞–∫—Ä—ã—Ç–æ */
  }
  .sheet.open{
    background:rgba(11,15,25,.28);     /* –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç */
    pointer-events:auto;
  }
  /* panel slides only */
  .panel{
    width:100%; max-width:480px; margin:0 auto;
    border-radius:24px 24px 0 0;
    background:linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.85));
    backdrop-filter: blur(12px);
    box-shadow:0 -18px 48px rgba(14,18,26,.28);
    padding:14px 14px 16px;

    transform:translateY(110%);        /* —Å–ø—Ä—è—Ç–∞–Ω–∞ */
    transition:transform var(--sheet-ms) cubic-bezier(.2,.8,.2,1); /* –ø–ª–∞–≤–Ω–æ —Ç–æ–ª—å–∫–æ –ø–∞–Ω–µ–ª—å */
  }
  .sheet.open .panel{ transform:translateY(0) }

  .panel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .panel-title{font-weight:900;font-size:18px;background:linear-gradient(135deg,var(--brand),var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent}
  .close-x{border:0;background:rgba(15,23,42,.06);width:34px;height:34px;border-radius:10px;cursor:pointer}

  .cart-items{display:grid;gap:10px;margin:10px 0 12px}
  .cart-row{display:grid;grid-template-columns:56px 1fr auto;align-items:center;background:#ffffffcc;border-radius:14px;padding:10px;box-shadow:0 6px 14px rgba(16,24,40,.08);position:relative;overflow:hidden}
  .cart-row::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:linear-gradient(180deg,var(--brand),var(--brand-2))}
  .cart-row .thumb{width:56px;height:56px;border-radius:12px}
  .row-meta .big{font-weight:800}
  .row-meta .sub{font-size:12px;color:var(--muted)}
  .row-pill{font-size:12px;padding:6px 10px;border-radius:999px;background:#f1f5ff;color:#2743ff;border:1px solid #dee6ff}

  .row-actions{display:flex;gap:10px}
  .btn{padding:14px 16px;border-radius:12px;border:0;font-weight:800;cursor:pointer}
  .btn.secondary{background:#eef1f7}
  .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff}

  /* Truck */
  .truck-wrap{position:absolute;left:0;right:0;bottom:0;pointer-events:none;overflow:visible;z-index:25}
  .truck{position:absolute;bottom:-8px;left:-40%;width:min(65vw,420px);transform:translateY(100%)}
  .truck.run{animation:popUp .2s ease-out forwards, drive var(--truck-ms) linear forwards}
  @keyframes popUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
  @keyframes drive{from{left:-40%}to{left:110%}}

  /* short heights */
  @media (max-height:690px){
    .card{min-height:154px}
    .thumb{width:110px;height:110px}
    .view[data-step="packages"] .meta .big{font-size:23px}
    .view[data-step="packages"] .meta .sub{font-size:14px}
  }
</style>
</head>
<body>
<div class="app" id="app">
  <header class="topbar">
    <button class="icon-btn" aria-label="Menu">‚ò∞</button>
    <div class="brand"><span class="dot"></span>Online Advertising</div>
    <div class="cart" id="cartIcon" aria-label="Cart">üõí<span class="cart-badge" id="cartCount">0</span></div>
  </header>

  <div class="views">
    <!-- PACKAGES -->
    <section class="view active" id="view-packages" data-step="packages">
      <h2>Choose package size</h2>
      <div class="list">
        <article class="card option" data-group="package" data-title="5 kg" data-sub="Mini">
          <div class="thumb"><img src="https://i.ibb.co/VYvSTkrk/1.png" alt="5 kg bale"></div>
          <div class="meta"><div class="big">5 kg</div><div class="sub">Mini</div></div>
        </article>
        <article class="card option" data-group="package" data-title="10 kg" data-sub="Standard">
          <div class="thumb"><img src="https://i.ibb.co/kVdXbYtk/2.png" alt="10 kg bale"></div>
          <div class="meta"><div class="big">10 kg</div><div class="sub">Standard</div></div>
        </article>
        <article class="card option" data-group="package" data-title="15 kg" data-sub="Maxi">
          <div class="thumb"><img src="https://i.ibb.co/5WXrVgf4/3.png" alt="15 kg bale"></div>
          <div class="meta"><div class="big">15 kg</div><div class="sub">Maxi</div></div>
        </article>
      </div>
    </section>

    <!-- PRODUCTS -->
    <section class="view" id="view-products" data-step="products">
      <h2>Choose product</h2>
      <div class="list">
        <article class="card option" data-group="product" data-title="Men">
          <div class="thumb"><img src="https://png.klev.club/uploads/posts/2024-04/png-klev-club-l79r-p-rubashka-gavaiskaya-png-7.png" alt="Men"></div>
          <div class="meta"><div class="big">Men</div><div class="sub">Shirts, pants, jackets</div></div>
        </article>
        <article class="card option" data-group="product" data-title="Women">
          <div class="thumb"><img src="https://png.klev.club/uploads/posts/2024-06/png-klev-club-t5to-p-plate-zhenskoe-png-2.png" alt="Women"></div>
          <div class="meta"><div class="big">Women</div><div class="sub">Dresses, tops, skirts</div></div>
        </article>
        <article class="card option" data-group="product" data-title="Kids">
          <div class="thumb"><img src="https://www.pngarts.com/files/12/Baby-Clothes-PNG-Transparent-Image.png" alt="Kids"></div>
          <div class="meta"><div class="big">Kids</div><div class="sub">Boys & Girls</div></div>
        </article>
        <article class="card option" data-group="product" data-title="Mixed">
          <div class="thumb"><img src="https://imgpng.ru/d/jeans_PNG5745.png" alt="Mixed"></div>
          <div class="meta"><div class="big">Mixed</div><div class="sub">Assorted selection</div></div>
        </article>
      </div>
    </section>
  </div>

  <!-- TRUCK -->
  <div class="truck-wrap"><img class="truck" id="truck" src="https://i.ibb.co/MytdP8qP/2555001.png" alt="Truck"></div>

  <!-- CONTINUE -->
  <div class="continue"><button id="continueBtn" disabled>Continue</button></div>

  <!-- CART SHEET -->
  <div class="sheet" id="sheet">
    <div class="panel">
      <div class="panel-header">
        <div class="panel-title">Your selection</div>
        <button class="close-x" id="closeSheet" aria-label="Close">‚úï</button>
      </div>
      <div class="cart-items" id="cartItems"></div>
      <div class="row-actions">
        <button class="btn secondary" id="dismissSheet">Back</button>
        <button class="btn primary" id="learnMore">Learn More</button>
      </div>
    </div>
  </div>
</div>

<script>
  const state={package:null,product:null};
  const $=s=>document.querySelector(s);
  const $$=s=>Array.from(document.querySelectorAll(s));

  const cartIcon=$("#cartIcon");
  const cartBadge=$("#cartCount");
  const continueBtn=$("#continueBtn");
  const viewPackages=$("#view-packages");
  const viewProducts=$("#view-products");
  const sheet=$("#sheet");
  const cartItems=$("#cartItems");
  const closeSheet=$("#closeSheet");
  const dismissSheet=$("#dismissSheet");
  const learnMore=$("#learnMore");
  const truck=$("#truck");

  let currentStep='packages';

  const chosenCount=()=>Number(!!state.package)+Number(!!state.product);
  const updateBadge=()=>cartBadge.textContent=chosenCount();
  function updateContinue(){continueBtn.disabled=(currentStep==='packages')?!state.package:!state.product;}
  function markSelected(){
    $$('.option').forEach(c=>{
      const g=c.dataset.group;
      if((g==='package'&&state.package&&c!==state.package.el)||(g==='product'&&state.product&&c!==state.product.el)){c.classList.remove('selected');}
    });
    if(state.package) state.package.el.classList.add('selected');
    if(state.product) state.product.el.classList.add('selected');
  }
  function renderCart(){
    cartItems.innerHTML='';
    ['package','product'].forEach(key=>{
      if(!state[key]) return;
      const row=document.createElement('div');row.className='cart-row';
      const t=document.createElement('div');t.className='thumb';
      const img=document.createElement('img');img.src=state[key].img.src;img.alt=state[key].title;t.append(img);
      const meta=document.createElement('div');meta.className='row-meta';
      const big=document.createElement('div');big.className='big';big.textContent=state[key].title;
      const sub=document.createElement('div');sub.className='sub';sub.textContent=key==='package'?'Selected package':'Selected product';
      meta.append(big,sub);
      const pill=document.createElement('div');pill.className='row-pill';pill.textContent=key==='package'?'Package':'Product';
      row.append(t,meta,pill);cartItems.append(row);
    });
  }
  function flyToCart(thumb){
    const cartRect=cartIcon.getBoundingClientRect();
    const srcRect=thumb.getBoundingClientRect();
    const clone=thumb.cloneNode(true);
    Object.assign(clone.style,{position:'fixed',zIndex:50,left:srcRect.left+'px',top:srcRect.top+'px',width:srcRect.width+'px',height:srcRect.height+'px',transition:`transform var(--fly-ms) cubic-bezier(.2,.8,.2,1), opacity var(--fly-ms) linear`});
    document.body.appendChild(clone);
    const dx=(cartRect.left+cartRect.width/2)-(srcRect.left+srcRect.width/2);
    const dy=(cartRect.top+cartRect.height/2)-(srcRect.top+srcRect.height/2);
    requestAnimationFrame(()=>{clone.style.transform=`translate(${dx}px, ${dy}px) scale(.35)`;clone.style.opacity='0.2';});
    setTimeout(()=>clone.remove(),700);
  }

  $$('.option').forEach(card=>{
    card.addEventListener('click', ()=>{
      const group=card.dataset.group;
      const data={el:card,img:card.querySelector('img'),title:card.dataset.title||card.querySelector('.big')?.textContent||''};
      state[group]=data;
      markSelected();updateBadge();updateContinue();renderCart();
      flyToCart(card.querySelector('.thumb'));
    });
  });

  continueBtn.addEventListener('click', ()=>{
    if(currentStep==='packages'){
      viewPackages.classList.remove('active');viewPackages.classList.add('prev');
      viewProducts.classList.add('active');
      currentStep='products';updateContinue();
    }else{
      renderCart();
      sheet.classList.add('open'); // backdrop instantly visible, panel animates
    }
  });

  function closeCart(){sheet.classList.remove('open');}
  $('#closeSheet').addEventListener('click', closeCart);
  $('#dismissSheet').addEventListener('click', closeCart);
  sheet.addEventListener('click', e=>{ if(e.target===sheet) closeCart(); });

  $('#learnMore').addEventListener('click', ()=>{
    closeCart();
    truck.classList.remove('run');
    truck.style.animation='none';truck.style.left='-40%';truck.style.transform='translateY(100%)';
    void truck.offsetWidth;truck.style.animation='';truck.classList.add('run');
  });

  updateBadge();updateContinue();
  document.addEventListener('touchstart', ()=>{}, {passive:true});
</script>
</body>
</html>
